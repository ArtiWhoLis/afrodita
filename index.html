<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Салон красоты "Афродита"</title>
    <link rel="stylesheet" href="css/style.css">
    <link rel="icon" type="image/png" href="https://cdn-icons-png.flaticon.com/512/3208/3208707.png">
</head>
<body>
    <header>
        <div class="container nav-flex">
            <a href="index.html" class="logo">Афродита</a>
            <nav class="main-nav" aria-label="Главное меню">
                <ul>
                    <li><a href="index.html" class="active">Главная</a></li>
                    <li><a href="services.html">Услуги</a></li>
                    <li><a href="booking.html">Запись</a></li>
                    <li><a href="contacts.html">Контакты</a></li>
                </ul>
            </nav>
            <div id="profilePanelWrap"></div>
        </div>
    </header>

    <main>
        <section class="hero fade-in">
            <div class="container">
                <div class="hero-img-wrap">
                    <img src="https://images.unsplash.com/photo-1517841905240-472988babdf9?auto=format&fit=crop&w=900&q=80" alt="Салон красоты" class="hero-img">
                </div>
                <h1>Ваша красота - наша забота</h1>
                <p>Современные косметические услуги от профессионалов</p>
            </div>
        </section>

        <section class="about fade-in">
            <div class="container">
                <h2>О нас</h2>
                <p>Салон красоты "Афродита" - это место, где вы можете расслабиться и доверить свою красоту профессионалам. Мы используем только качественные материалы и следим за последними тенденциями в мире красоты. Наша цель - подчеркнуть вашу уникальность и подарить вам уверенность в себе.</p>
            </div>
        </section>

        <section class="featured-services fade-in">
            <div class="container">
                <h2>Популярные услуги</h2>
                <div class="services-grid">
                    <div class="service-card">
                        <img src="https://avatars.dzeninfra.ru/get-zen_doc/271828/pub_685958cf756b684bba354aeb_68596999582ebd65225687ba/scale_1200" alt="Маникюр" class="service-img">
                        <h3>Маникюр</h3>
                        <p>Идеальные ногти на любой случай.</p>
                    </div>
                    <div class="service-card">
                        <img src="https://i.pinimg.com/originals/a5/28/63/a5286387318f310cec15ea5654694b67.png" alt="Уход за лицом" class="service-img">
                        <h3>Уход за лицом</h3>
                        <p>Чистая и сияющая кожа.</p>
                    </div>
                    <div class="service-card">
                        <img src="https://i.pinimg.com/originals/a1/98/a6/a198a6033ee11bdd1fdabe5357953249.jpg" alt="Стрижки и укладки" class="service-img">
                        <h3>Стрижки и укладки</h3>
                        <p>Стильный образ от наших мастеров.</p>
                    </div>
                </div>
                <div class="text-center">
                    <a href="services.html" class="btn">Все услуги</a>
                </div>
            </div>
        </section>

        <section class="reviews-section fade-in">
            <div class="container">
                <h2 class="reviews-title">Отзывы наших клиентов</h2>
                <div class="reviews-grid">
                    <div class="review-card">
                        <img src="https://randomuser.me/api/portraits/women/44.jpg" class="review-avatar" alt="Аватар">
                        <div class="review-name">Екатерина</div>
                        <div class="review-text">Очень понравился сервис и атмосфера! Мастера — настоящие профессионалы.</div>
                    </div>
                    <div class="review-card">
                        <img src="https://randomuser.me/api/portraits/men/32.jpg" class="review-avatar" alt="Аватар">
                        <div class="review-name">Алексей</div>
                        <div class="review-text">Записался на стрижку — всё быстро, удобно и качественно. Рекомендую!</div>
                    </div>
                    <div class="review-card">
                        <img src="https://randomuser.me/api/portraits/women/65.jpg" class="review-avatar" alt="Аватар">
                        <div class="review-name">Мария</div>
                        <div class="review-text">Делала маникюр — результат превзошёл ожидания! Спасибо!</div>
                    </div>
                </div>
            </div>
        </section>

        <section class="faq-section fade-in">
            <div class="container">
                <h2 class="faq-title">Часто задаваемые вопросы</h2>
                <div class="faq-list">
                    <div class="faq-item">
                        <div class="faq-question">Как записаться на услугу?</div>
                        <div class="faq-answer">Выберите услугу, дату и время на странице "Запись" и заполните контактные данные. После отправки заявки мы свяжемся с вами для подтверждения.</div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">Можно ли отменить или перенести запись?</div>
                        <div class="faq-answer">Да, просто позвоните нам по телефону или напишите на email, указанные в разделе "Контакты".</div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">Какие материалы используются?</div>
                        <div class="faq-answer">Мы используем только профессиональные и сертифицированные материалы ведущих брендов.</div>
                    </div>
                    <div class="faq-item">
                        <div class="faq-question">Есть ли скидки или акции?</div>
                        <div class="faq-answer">Следите за нашими новостями и акциями в социальных сетях или уточняйте у администратора.</div>
                    </div>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 Салон красоты "Афродита". Все права защищены.</p>
        </div>
    </footer>

    <button id="toTopBtn" title="Наверх">↑</button>

    <script src="js/script.js"></script>
    <script src="js/enhance.js"></script>
    <style>
    /* Удалены дублирующие стили profile-panel, теперь используется только css/style.css */
    </style>
    <script>
    document.addEventListener('DOMContentLoaded', function() {
        const headerRight = document.getElementById('profilePanelWrap');
        const token = localStorage.getItem('token');
        if (!token) {
            // Не авторизован — показать кнопку Войти
            const loginBtn = document.createElement('a');
            loginBtn.href = 'login.html';
            loginBtn.className = 'btn';
            loginBtn.textContent = 'Войти';
            headerRight.appendChild(loginBtn);
            return;
        }
        // Авторизован — вставить профиль-меню
        headerRight.innerHTML = `
        <div class="profile-panel" id="profilePanel">
            <div class="profile-panel__trigger" id="profilePanelTrigger">
                <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Аватар" class="profile-panel__avatar" id="profilePanelAvatar">
                <span class="profile-panel__fio" id="profilePanelFio">Профиль</span>
                <svg class="profile-panel__arrow" width="16" height="16" viewBox="0 0 20 20"><path d="M5 8l5 5 5-5" stroke="#888" stroke-width="2" fill="none"/></svg>
            </div>
            <div class="profile-panel__dropdown" id="profilePanelDropdown">
                <div class="profile-panel__user">
                    <img src="https://cdn-icons-png.flaticon.com/512/3135/3135715.png" alt="Аватар" class="profile-panel__avatar-lg" id="profilePanelAvatarLg">
                    <div class="profile-panel__fio-lg" id="profilePanelFioLg">Профиль</div>
                    <div class="profile-panel__phone" id="profilePanelPhone">+7 ••• ••• •• 17</div>
                </div>
                <a href="profile.html" class="profile-panel__action">Профиль</a>
                <a href="#" class="profile-panel__action" id="profilePanelLogout">Выйти</a>
            </div>
        </div>`;
        // Логика меню
        const trigger = document.getElementById('profilePanelTrigger');
        const dropdown = document.getElementById('profilePanelDropdown');
        const panel = document.getElementById('profilePanel');
        const fioSpan = document.getElementById('profilePanelFio');
        const fioLg = document.getElementById('profilePanelFioLg');
        const phone = document.getElementById('profilePanelPhone');
        let open = false;
        function setDropdownState(state) {
            open = state;
            panel.classList.toggle('open', open);
            dropdown.style.display = open ? 'block' : 'none';
            if (open) {
                const rect = trigger.getBoundingClientRect();
                let left = rect.left;
                let top = rect.bottom + 6;
                let minWidth = rect.width + 80;
                const dropdownWidth = Math.max(dropdown.offsetWidth, minWidth, 220);
                if (left + dropdownWidth > window.innerWidth - 12) {
                    left = window.innerWidth - dropdownWidth - 12;
                    if (left < 12) left = 12;
                }
                dropdown.style.left = left + 'px';
                dropdown.style.top = top + 'px';
                dropdown.style.minWidth = minWidth + 'px';
                dropdown.style.maxWidth = '320px';
            }
        }
        setDropdownState(false);
        trigger.onclick = function(e) {
            e.stopPropagation();
            setDropdownState(!open);
        };
        window.addEventListener('resize', function() {
            if (open) setDropdownState(true);
        });
        document.addEventListener('scroll', function() {
            if (open) setDropdownState(true);
        }, true);
        document.addEventListener('click', function(e) {
            if (!panel.contains(e.target)) {
                setDropdownState(false);
            }
        });
        document.getElementById('profilePanelLogout').onclick = function(e) {
            e.preventDefault();
            localStorage.removeItem('token');
            window.location.href = 'login.html';
        };
        // Подгружаем профиль
        fetch('/api/profile', { headers: { 'Authorization': 'Bearer ' + token } })
            .then(res => res.ok ? res.json() : null)
            .then(user => {
                if (!user) return;
                fioSpan.textContent = user.fio;
                fioLg.textContent = user.fio;
                phone.textContent = user.phone.replace(/(\d{1})(\d{3})(\d{3})(\d{2})(\d{2})/, '+$1 ••• ••• •• $5');
                // Добавить кнопку Панель мастера, если есть роль master
                if (user.role === 'master') {
                    const masterBtn = document.createElement('a');
                    masterBtn.href = 'master.html';
                    masterBtn.className = 'profile-panel__action';
                    masterBtn.textContent = 'Панель мастера';
                    const dropdown = document.getElementById('profilePanelDropdown');
                    dropdown.insertBefore(masterBtn, dropdown.querySelector('.profile-panel__action[href="profile.html"]'));
                }
                // Добавить кнопку Админ-панель, если есть роль admin
                if (user.role === 'admin') {
                    const adminBtn = document.createElement('a');
                    adminBtn.href = 'admin.html';
                    adminBtn.className = 'profile-panel__action';
                    adminBtn.textContent = 'Админ-панель';
                    const dropdown = document.getElementById('profilePanelDropdown');
                    dropdown.insertBefore(adminBtn, dropdown.querySelector('.profile-panel__action[href="profile.html"]'));
                }
            });
    });
    </script>
</body>
</html> 